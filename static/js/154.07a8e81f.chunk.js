"use strict";(self.webpackChunkmy_app=self.webpackChunkmy_app||[]).push([[154],{3938:(e,t,a)=>{a.d(t,{B2:()=>o,Cq:()=>A,DT:()=>c,I7:()=>y,ID:()=>n,K:()=>f,KU:()=>p,R6:()=>g,_6:()=>u,a$:()=>d,ao:()=>s,dY:()=>v,ld:()=>l,yj:()=>i,yt:()=>h,zR:()=>j});var r=a(4505);const n=async e=>(0,r.A)("behoefte","/behoefte",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),o=async e=>(0,r.A)("aanvraag","/aanvraag/categorie",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),i=async e=>(0,r.A)("aanvraag",`/aanvraag/recommendatie/categorie/?patientId=${e}`),s=async e=>(0,r.A)("aanvraag","/aanvraag/categorie/kies",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),c=async e=>(0,r.A)("aanvraag","/aanvraag/product",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),d=async e=>(0,r.A)("aanvraag",`/aanvraag/recommendatie/product/?clientId=${e}`),l=async e=>{try{const t=await(0,r.A)("ecd",`/api/zorgdossier/client/${e}`);return t&&t.id?t:null}catch(t){return console.error("Error fetching zorgdossier:",t),null}},g=async e=>{try{return await(0,r.A)("ecd",`/api/onderzoek/dossier/${e}`)||null}catch(t){return console.error("Error fetching onderzoek by dossier ID:",t),null}},h=async e=>await(0,r.A)("behoefte","/ecd/zorgdossier",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),u=async e=>await(0,r.A)("behoefte","/ecd/onderzoek",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),v=async(e,t)=>(0,r.A)("behoefte",`/ecd/onderzoek/${e}/diagnose`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}),y=async e=>(0,r.A)("aanvraag","/aanvraag/product/kies",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),p=async e=>{try{return await(0,r.A)("ecd",`/api/client/${e}`)}catch(t){throw console.error(`Error fetching client with ID ${e}:`,t),t}},f=async e=>(0,r.A)("behoefte",`/behoefte/client/${e}`),A=async(e,t)=>(console.log(e,t),(0,r.A)("behoefte",`/behoefte/${t}/aanvraagverwerking`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})),j=async e=>(0,r.A)("aanvraag",`/aanvraag/client/${e}`)},4505:(e,t,a)=>{a.d(t,{A:()=>n});const r={behoefte:"http://smart-care-assist-1644290222.eu-central-1.elb.amazonaws.com:8080/behoeftebepaling",aanvraag:"http://smart-care-assist-1644290222.eu-central-1.elb.amazonaws.com:8080/aanvraagverwerking",product:"http://smart-care-assist-1644290222.eu-central-1.elb.amazonaws.com:8080/product",ecd:"http://smart-care-assist-1644290222.eu-central-1.elb.amazonaws.com:8080/ecd"},n=async function(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const n={"Content-Type":"application/json",...a.headers},o=(e=>{const t=r[e];if(!t)throw console.error(`ERROR: API base URL for service '${e}' is not defined.`),new Error(`API base URL for service '${e}' is not configured.`);return t})(e),i=await fetch(`${o}${t}`,{method:a.method||"GET",...a,headers:n});if(!i.ok){let e=await i.text();try{console.log("lskdjflksdjf",i);e=JSON.parse(e).message||e}catch(s){}throw new Error(`API Error ${i.status}: ${e}`)}return 204===i.status||"0"===i.headers.get("Content-Length")?null:i.json()}},8154:(e,t,a)=>{a.r(t),a.d(t,{default:()=>m});var r=a(5043),n=a(1688),o=a(7313),i=a(3504),s=a(289),c=a(4958),d=a(5397),l=a(1650),g=a(180),h=a(3307),u=a(9998),v=a(2228),y=a(1766),p=a(3938),f=a(579);const{Title:A,Paragraph:j}=o.A,{Option:b}=i.A,m=()=>{const{clientId:e}=(0,n.g)(),t=(0,n.W6)(),a=(0,n.zy)(),[o,m]=(0,r.useState)(null),[x,k]=(0,r.useState)(null),[z,w]=(0,r.useState)([]),[I,_]=(0,r.useState)([]),[S,C]=(0,r.useState)(!0),[O]=s.A.useForm(),[B,T]=(0,r.useState)(null),[P,$]=(0,r.useState)([]),[E,N]=(0,r.useState)([]),D=(0,r.useCallback)((async()=>{C(!0);let t=null,r=null;if(a.state&&a.state.zorgdossierId&&a.state.onderzoekId)t=a.state.zorgdossierId,r=a.state.onderzoekId;else{c.Ay.warning("Navigatiestate leeg. Probeer benodigde ID's via API op te halen...");try{const a=await(0,p.ld)(e);if(a&&a.id){t=a.id;const e=await(0,p.R6)(t);e&&e.id?r=e.id:c.Ay.error("Geen gekoppeld onderzoek gevonden bij dit zorgdossier.")}else c.Ay.error("Geen zorgdossier gevonden voor deze cli\xebnt.")}catch(n){c.Ay.error("Fout bij het ophalen van zorgdossier of gekoppeld onderzoek."),console.error("Error loading IDs for BehoeftebepalingPage:",n)}}if(m(t),k(r),r){try{const t=await(0,p.K)(e);w(t),c.Ay.success("Behoeften succesvol geladen.")}catch(n){c.Ay.info("Geen behoeften gevonden voor dit onderzoek."),console.error("Error fetching behoeften:",n),w([])}try{const t=await(0,p.zR)(e);_(t),c.Ay.success("Aanvragen succesvol geladen.")}catch(n){c.Ay.info("Geen aanvragen gevonden voor deze cli\xebnt."),console.error("Error fetching aanvragen:",n),_([])}}else c.Ay.info("Geen geldig Onderzoek ID beschikbaar om behoeften en aanvragen te laden."),w([]),_([]);C(!1)}),[e,a.state]);(0,r.useEffect)((()=>{D()}),[D]);return S?(0,f.jsx)(y.A,{children:(0,f.jsx)(d.A,{size:"large",tip:"Gegevens laden..."})}):o&&x?(0,f.jsxs)(y.A,{children:[(0,f.jsxs)(A,{level:1,children:["Behoeften en Aanvragen voor Cli\xebnt: ",e]}),(0,f.jsxs)(j,{children:["Huidig Zorgdossier ID: **",o,"**"]}),(0,f.jsxs)(j,{children:["Huidig Onderzoek ID: **",x,"**"]}),(0,f.jsx)(g.A,{title:"Nieuwe Behoefte Toevoegen",style:{marginBottom:"20px"},children:(0,f.jsxs)(s.A,{form:O,layout:"vertical",onFinish:async t=>{const{titel:a,beschrijving:r,urgentie:n}=t;if(a.trim()&&r.trim())if(x){C(!0);try{const t={onderzoek_id:x,client_id:e,titel:a,beschrijving:r,urgentie:n};console.log("Adding behoefte with data:",t),await(0,p.ID)(t),O.resetFields(),c.Ay.success("Behoefte succesvol toegevoegd."),await D()}catch(o){c.Ay.error("Fout bij het toevoegen van behoefte: "+(o.message||o)),console.error("Error adding behoefte:",o)}finally{C(!1)}}else c.Ay.error("Kan geen behoefte toevoegen: Onderzoek ID ontbreekt. Ververs de pagina of ga terug naar cli\xebntdetails.");else c.Ay.warning("Vul zowel de titel als de beschrijving in voor de behoefte.")},children:[(0,f.jsx)(s.A.Item,{label:"Titel Behoefte",name:"titel",rules:[{required:!0,message:"Vul een titel in voor de behoefte!"}],children:(0,f.jsx)(h.A,{placeholder:"Bijv. Lopen, Eten, Sociale Interactie"})}),(0,f.jsx)(s.A.Item,{label:"Beschrijving Behoefte",name:"beschrijving",rules:[{required:!0,message:"Vul een beschrijving in voor de behoefte!"}],children:(0,f.jsx)(h.A.TextArea,{rows:4,placeholder:"Bijv. Pati\xebnt wil leren lopen na val"})}),(0,f.jsx)(s.A.Item,{label:"Urgentie",name:"urgentie",initialValue:"Laag",rules:[{required:!0,message:"Selecteer de urgentie!"}],children:(0,f.jsxs)(i.A,{placeholder:"Selecteer urgentie",children:[(0,f.jsx)(b,{value:"Laag",children:"Laag"}),(0,f.jsx)(b,{value:"Normaal",children:"Normaal"}),(0,f.jsx)(b,{value:"Hoog",children:"Hoog"})]})}),(0,f.jsx)(l.A,{type:"primary",htmlType:"submit",loading:S,children:"Behoefte Toevoegen"})]})}),(0,f.jsx)(u.A,{}),(0,f.jsx)(g.A,{title:"Bestaande Behoeften",style:{marginBottom:"20px"},children:(0,f.jsx)(v.Ay,{bordered:!0,dataSource:z,renderItem:t=>(0,f.jsx)(v.Ay.Item,{actions:[(0,f.jsx)(l.A,{onClick:()=>(async t=>{C(!0);try{const a={client:{id:e},behoefte:t};console.log(a,t.id);const r=await(0,p.Cq)(a,t.id);c.Ay.success(`Aanvraag voor behoefte "${t.titel}" succesvol gestart.`),T(r),await D()}catch(a){c.Ay.error("Fout bij het starten van de aanvraag: "+(a.message||a)),console.error("Error starting aanvraag:",a)}finally{C(!1)}})(t),disabled:S||I.some((e=>e.behoefte_id===t.id)),children:"Start Aanvraag"},"start-aanvraag")],children:(0,f.jsx)(v.Ay.Item.Meta,{title:t.titel?t.titel:t.beschrijving,description:(0,f.jsxs)(f.Fragment,{children:[(0,f.jsxs)(j,{children:["Beschrijving: ",t.beschrijving]}),(0,f.jsxs)(j,{children:["Urgentie: ",t.urgentie||"Niet gespecificeerd"]}),(0,f.jsxs)(j,{children:["Status: ",t.status||"Niet gespecificeerd"," | Datum: ",new Date(t.datum).toLocaleDateString()]})]})})})})}),(0,f.jsx)(u.A,{}),(0,f.jsx)(g.A,{title:"Bestaande Aanvragen",style:{marginBottom:"20px"},children:(0,f.jsx)(v.Ay,{bordered:!0,dataSource:I,renderItem:e=>{var t,a;return(0,f.jsx)(v.Ay.Item,{actions:[!e.gekozen_categorie_id&&1!==e.status&&(0,f.jsx)(l.A,{onClick:()=>(async e=>{if(T(e),C(!0),!e.Behoefte||!e.Behoefte.beschrijving)return c.Ay.error("Beschrijving van de behoefte ontbreekt voor deze aanvraag. Kan geen categorie advies starten."),void C(!1);try{console.log(e.Behoefte);const t={patientId:e.client_id,budget:e.budget||2e4,behoeften:e.Behoefte.beschrijving};console.log(t),await(0,p.B2)(t),c.Ay.success("Categorie-aanvraag gestart. Categorie\xebn ophalen...");const a=await(0,p.yj)(e.client_id);null!==a&&void 0!==a&&a.categories?($(a.categories),c.Ay.success("Categorie\xebn succesvol opgehaald.")):(c.Ay.warning("Geen categorie\xebn gevonden in het antwoord."),$([])),await D()}catch(t){c.Ay.error("Fout bij opvragen categorie aanbeveling: "+(t.message||t)),console.error("Error starting category request:",t)}finally{C(!1)}})(e),loading:S&&(null===B||void 0===B?void 0:B.id)===e.id,children:"Vraag Categorie Advies"},"advies"),e.gekozen_categorie_id&&!e.gekozen_product_id&&2!==e.status&&(0,f.jsx)(l.A,{onClick:()=>(async e=>{T(e),C(!0);try{if(!e.gekozen_categorie_id)return c.Ay.warning("Er is nog geen categorie gekozen voor deze aanvraag."),void C(!1);const t={clientId:e.client_id,budget:e.budget||2e4,behoeften:e.Behoefte.beschrijving,CategorieID:e.gekozen_categorie_id};console.log(JSON.stringify(t)),await(0,p.DT)(t),c.Ay.success("Product-aanvraag gestart. Producten ophalen...");const a=await(0,p.a$)(e.client_id);N(a.products),c.Ay.success("Producten succesvol opgehaald."),await D()}catch(t){c.Ay.error("Fout bij opvragen product aanbeveling: "+(t.message||t)),console.error("Error starting product request:",t)}finally{C(!1)}})(e),loading:S&&(null===B||void 0===B?void 0:B.id)===e.id,children:"Vraag Product Advies"},"product-advies")],children:(0,f.jsx)(v.Ay.Item.Meta,{title:`Aanvraag voor: ${(null===(t=e.Behoefte)||void 0===t?void 0:t.titel)||(null===(a=e.Behoefte)||void 0===a?void 0:a.beschrijving)||"Onbekende Behoefte"}`,description:(0,f.jsxs)(f.Fragment,{children:[(0,f.jsxs)(j,{children:["Aanvraag ID: ",e.id]}),(0,f.jsxs)(j,{children:["Behoefte ID: ",e.behoefte_id]}),(0,f.jsxs)(j,{children:["Status: **",e.StatusString||e.status,"**"]}),(0,f.jsxs)(j,{children:["Budget: \u20ac",e.budget?e.budget.toFixed(2):"N.v.t."]}),e.gekozen_categorie_id&&(0,f.jsxs)(j,{children:["Gekozen Categorie ID: ",e.gekozen_categorie_id]}),e.gekozen_product_id&&(0,f.jsxs)(j,{children:["Gekozen Product EAN: ",e.gekozen_product_id]})]})})})}})}),P.length>0&&B&&(0,f.jsx)(g.A,{title:`Gevonden Categorie\xebn voor Aanvraag: ${B.id}`,style:{marginTop:"20px"},children:(0,f.jsx)(v.Ay,{bordered:!0,dataSource:P,renderItem:e=>(0,f.jsx)(v.Ay.Item,{actions:[(0,f.jsx)(l.A,{onClick:()=>(async e=>{if(B){C(!0);try{const t={client_id:B.client_id,behoefte_id:B.behoefte_id,categorie:e};await(0,p.ao)(t),c.Ay.success(`Categorie ${e} gekozen voor aanvraag ${B.id}.`),await D(),$([]),T({...B,GekozenCategorieID:e})}catch(t){c.Ay.error("Fout bij het kiezen van categorie: "+(t.message||t)),console.error("Error choosing category:",t)}finally{C(!1)}}else c.Ay.error("Geen aanvraag geselecteerd voor categoriekeuze.")})(e.id),children:"Kies deze Categorie"},"select-cat")],children:(0,f.jsx)(v.Ay.Item.Meta,{title:e.naam,description:`ID: ${e.id}`})})})}),E.length>0&&(null===B||void 0===B?void 0:B.gekozen_categorie_id)&&(0,f.jsx)(g.A,{title:`Gevonden Producten voor Aanvraag: ${B.id} (Categorie: ${B.gekozen_categorie_id})`,style:{marginTop:"20px"},children:(0,f.jsx)(v.Ay,{bordered:!0,dataSource:E,renderItem:e=>(0,f.jsx)(v.Ay.Item,{actions:[(0,f.jsx)(l.A,{onClick:()=>(async e=>{if(B){C(!0);try{const t={client_id:B.client_id,behoefte_id:B.behoefte_id,product_ean:e};await(0,p.I7)(t),c.Ay.success(`Product met EAN ${e} gekozen voor aanvraag ${B.id}.`),await D(),N([]),T(null)}catch(t){c.Ay.error("Fout bij het kiezen van product: "+(t.message||t)),console.error("Error choosing product:",t)}finally{C(!1)}}else c.Ay.error("Geen aanvraag geselecteerd voor productkeuze.")})(e.ean),children:"Kies dit Product"},"select-product")],children:(0,f.jsx)(v.Ay.Item.Meta,{title:e.naam,description:(0,f.jsxs)(f.Fragment,{children:[(0,f.jsxs)(j,{children:["EAN: ",e.ean]}),(0,f.jsxs)(j,{children:["Prijs: \u20ac",e.prijs?e.prijs.toFixed(2):"N.v.t."]}),(0,f.jsxs)(j,{children:["Beschrijving: ",e.beschrijving]})]})})})})})]}):(0,f.jsxs)(y.A,{children:[(0,f.jsx)(A,{level:3,children:"Fout: Zorgdossier of Onderzoek ID ontbreekt."}),(0,f.jsx)(j,{children:"Controleer of de cli\xebnt, het zorgdossier en het onderzoek correct zijn aangemaakt. Dit kan gebeuren na een paginaverversing als de benodigde gegevens niet direct via de URL beschikbaar zijn. Ga terug naar de cli\xebntdetails om dit te controleren."}),(0,f.jsx)(l.A,{onClick:()=>t.push(`/clients/${e}`),children:"Terug naar Cli\xebntdetails"})]})}},9998:(e,t,a)=>{a.d(t,{A:()=>l});var r=a(8168),n=a(4467),o=a(8139),i=a.n(o),s=a(5043),c=a(5296),d=function(e,t){var a={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(a[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var n=0;for(r=Object.getOwnPropertySymbols(e);n<r.length;n++)t.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(e,r[n])&&(a[r[n]]=e[r[n]])}return a};const l=function(e){var t=s.useContext(c.QO),a=t.getPrefixCls,o=t.direction,l=e.prefixCls,g=e.type,h=void 0===g?"horizontal":g,u=e.orientation,v=void 0===u?"center":u,y=e.orientationMargin,p=e.className,f=e.children,A=e.dashed,j=e.plain,b=d(e,["prefixCls","type","orientation","orientationMargin","className","children","dashed","plain"]),m=a("divider",l),x=v.length>0?"-".concat(v):v,k=!!f,z="left"===v&&null!=y,w="right"===v&&null!=y,I=i()(m,"".concat(m,"-").concat(h),(0,n.A)((0,n.A)((0,n.A)((0,n.A)((0,n.A)((0,n.A)((0,n.A)({},"".concat(m,"-with-text"),k),"".concat(m,"-with-text").concat(x),k),"".concat(m,"-dashed"),!!A),"".concat(m,"-plain"),!!j),"".concat(m,"-rtl"),"rtl"===o),"".concat(m,"-no-default-orientation-margin-left"),z),"".concat(m,"-no-default-orientation-margin-right"),w),p),_=(0,r.A)((0,r.A)({},z&&{marginLeft:y}),w&&{marginRight:y});return s.createElement("div",(0,r.A)({className:I},b,{role:"separator"}),f&&"vertical"!==h&&s.createElement("span",{className:"".concat(m,"-inner-text"),style:_},f))}}}]);
//# sourceMappingURL=154.07a8e81f.chunk.js.map